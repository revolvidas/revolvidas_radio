@@ -19,7 +19,7 @@ <h2 class="titulo">游댠 HITS QUE NUNCA MUEREN 游댠</h2>
    <div class="radio-container">
      <button class="btn radio-btn" onclick="toggleRadio()" id="playbtn">Reproducir</button>
      <audio id="radioplayer" preload="none">
        <source src="https://radio-proxy-we02.onrender.com/radio" type="audio/mpeg" />
        <source src="https://radio-proxy-iwb2.onrender.com/radio" type="audio/mpeg" />
        Tu navegador no soporta audio HTML5.
      </audio>
    </div>
@@ -38,48 +38,52 @@ <h2 class="titulo">游댠 HITS QUE NUNCA MUEREN 游댠</h2>
  </p>

  <script>
    // Sin cambiar estilos, solo l칩gica de estados del bot칩n
    document.addEventListener("DOMContentLoaded", () => {
      const player = document.getElementById("radioplayer");
      const playbtn = document.getElementById("playbtn");

      // Estados autom치ticos seg칰n eventos del <audio>
      // Actualiza el texto del bot칩n seg칰n los eventos del audio
      player.addEventListener("playing", () => { playbtn.textContent = "Pausar"; });
      player.addEventListener("pause", () => { playbtn.textContent = "Reproducir"; });
      player.addEventListener("waiting", () => { if (!player.paused) playbtn.textContent = "Cargando..."; });
      player.addEventListener("stalled", () => { if (!player.paused) playbtn.textContent = "Cargando..."; });
      player.addEventListener("canplay", () => { if (!player.paused) playbtn.textContent = "Pausar"; });
      player.addEventListener("error", () => { playbtn.textContent = "Reproducir"; });
      player.addEventListener("error", () => {
        console.error("Error al cargar el stream");
        playbtn.textContent = "Reproducir";
      });
    });

    function startPlayback(player, playbtn) {
      // Forzamos carga por compatibilidad con m칩viles/iOS
      try { player.load(); } catch (e) {}
      playbtn.textContent = "Cargando...";

      const attemptPlay = player.play();
      if (attemptPlay && typeof attemptPlay.then === "function") {
        attemptPlay.then(() => {
          // 'playing' actualizar치 el texto a "Pausar"
        }).catch((err) => {
          console.error("Error play():", err);
          playbtn.textContent = "Reproducir";
        });
      }
    }

    function toggleRadio() {
      const player = document.getElementById("radioplayer");
      const playbtn = document.getElementById("playbtn");

      if (player.paused) {
        startPlayback(player, playbtn);
        playbtn.textContent = "Cargando...";
        player.load(); // Reinicia la carga del stream

        const timeout = setTimeout(() => {
          if (player.paused) {
            playbtn.textContent = "Reproducir";
            console.error("Tiempo de carga agotado");
          }
        }, 10000); // 10 segundos

        const playPromise = player.play();
        if (playPromise !== undefined) {
          playPromise.then(() => {
            clearTimeout(timeout);
            // "playing" cambiar치 el texto a "Pausar"
          }).catch((error) => {
            clearTimeout(timeout);
            console.error("Error al intentar reproducir:", error);
            playbtn.textContent = "Reproducir";
          });
        }
      } else {
        player.pause();
        // 'pause' pondr치 "Reproducir"
      }
    }
  </script>
</body>
</html>
