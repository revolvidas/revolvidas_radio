<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Revolvidas Radio</title>

  <!-- Fuente 8-bit -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />

  <!-- CSS (cache-busting) -->
  <link rel="stylesheet" href="style.css?v=9" />
</head>
<body>
  <div class="container">
    <!-- Logo -->
    <img src="img/logo.png" alt="Revolvidas Radio Logo" class="logo" />

    <!-- Eslogan (como el original) -->
    <h2 class="titulo">ðŸ”¥ HITS QUE NUNCA MUEREN ðŸ”¥</h2>

    <!-- Reproductor -->
    <div class="radio-container">
      <!-- Loader retro, pequeÃ±o y ENCIMA del botÃ³n -->
      <div id="loader" class="loader-vinyl" aria-hidden="true"></div>

      <button class="btn radio-btn" onclick="toggleRadio()" id="playBtn">â–¶ Reproducir</button>

      <audio id="radioPlayer" preload="none">
        <!-- Usa tu stream que ya te funcionaba -->
        <source src="https://radio-proxy-iweb2.onrender.com/radio" type="audio/mpeg" />
        Tu navegador no soporta audio HTML5.
      </audio>
    </div>

    <!-- Botones sociales -->
    <div class="socials">
      <a href="https://www.facebook.com/revolvidas" class="btn facebook-btn" target="_blank">Facebook</a>
      <a href="https://www.youtube.com/@djvalyodardo" class="btn youtube-btn" target="_blank">Youtube</a>
      <a href="https://www.mixcloud.com/walter-donardo/" class="btn remixes-btn" target="_blank">Mixcloud</a>
    </div>

    <!-- Footer -->
    <p class="footer">
      ClÃ¡sicos de los 80â€™s y 90â€™s en vivo ðŸŽ¶ <br />
      Escucha la mejor mÃºsica retro 24/7.
    </p>
  </div>

  <script>
    // Referencias
    const player  = document.getElementById('radioPlayer');
    const playBtn = document.getElementById('playBtn');
    const loader  = document.getElementById('loader');

    // Oculta loader cuando realmente empieza / deja de sonar
    player.addEventListener('playing', () => { loader.style.display = 'none'; });
    player.addEventListener('pause',   () => { loader.style.display = 'none'; });
    player.addEventListener('error',   () => { loader.style.display = 'none'; });

    function toggleRadio() {
      if (player.paused) {
        // Mostrar loader pequeÃ±o mientras intenta conectar
        loader.style.display = 'block';

        // Mantengo tu lÃ³gica original
        player.play().catch(() => {
          // si falla, esconder loader y volver al texto original
          loader.style.display = 'none';
          playBtn.textContent = "â–¶ Reproducir";
        });
        playBtn.textContent = "â…¡ Pausar";

        // Fallback: ocultar loader si algo tarda demasiado
        setTimeout(() => { loader.style.display = 'none'; }, 7000);
      } else {
        player.pause();
        playBtn.textContent = "â–¶ Reproducir";
        loader.style.display = 'none';
      }
    }
  </script>
</body>
</html>
